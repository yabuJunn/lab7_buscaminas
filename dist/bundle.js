(()=>{"use strict";var e={93:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MineTable=t.Square_Square=t.MineGrid=t.directorio=void 0,t.directorio=()=>{};var n=s(352);Object.defineProperty(t,"MineGrid",{enumerable:!0,get:function(){return n.MineGrid}});var r=s(40);Object.defineProperty(t,"Square_Square",{enumerable:!0,get:function(){return r.Square_Square}});var o=s(139);Object.defineProperty(t,"MineTable",{enumerable:!0,get:function(){return o.MineTable}})},352:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MineGrid=void 0;const n=s(527),r=s(500);s(93);class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,n.addObserver)(this)}connectedCallback(){this.render()}render(){var e,t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const s=this.ownerDocument.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href","/src/components/grid/grid.css"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(s);const o=this.ownerDocument.createElement("div");null===(t=this.shadowRoot)||void 0===t||t.appendChild(o);const a=(0,r.creationSquare)(n.state.selected);null==a||a.forEach((e=>{o.appendChild(e)}))}}}t.MineGrid=o,customElements.define("mine-grid",o)},40:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Square_Square=void 0;const n=s(527),r=s(170);class o extends HTMLElement{static get observedAttributes(){return Object.keys({mine:null,number:null,opened:null,ident:null})}constructor(){super(),this.properties={mine:"",number:"",opened:"",ident:""},this.attachShadow({mode:"open"})}attributeChangedCallback(e,t,s){switch(e){case"mine":this.properties.mine=s;break;case"number":this.properties.number=s;break;case"opened":this.properties.opened=s;break;case"ident":this.properties.ident=s}}connectedCallback(){this.render()}render(){var e,t;const s=this.ownerDocument.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href","/src/components/square/square.css"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(s);const o=this.ownerDocument.createElement("div");o.classList.add("square"),null===(t=this.shadowRoot)||void 0===t||t.appendChild(o),"true"===this.properties.mine&&o.classList.add("mine"),"true"===this.properties.opened&&o.classList.add("opened"),o.addEventListener("click",(()=>{(0,n.dispatch)((0,r.changeSelected)(this.properties.ident)),(0,n.dispatch)((0,r.addOpened)(this.properties.ident))}))}}t.Square_Square=o,customElements.define("square-square",o)},139:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MineTable=void 0;const n=s(527),r=s(170);s(93);class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e,t;const s=this.ownerDocument.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href","/src/components/table/table.css"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(s);const o=this.ownerDocument.createElement("section");null===(t=this.shadowRoot)||void 0===t||t.appendChild(o);const a=this.ownerDocument.createElement("h1");a.innerHTML="Buscaminas",o.appendChild(a);const i=this.ownerDocument.createElement("mine-grid");o.appendChild(i);const d=this.ownerDocument.createElement("button");d.innerHTML="RESET GAME",o.appendChild(d),d.addEventListener("click",(()=>{(0,n.dispatch)((0,r.resetGame)())}))}}t.MineTable=o,customElements.define("mine-table",o)},170:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetGame=t.lostGame=t.addOpened=t.uploadMines=t.changeSelected=void 0;const n=s(823);t.changeSelected=e=>({type:n.Actions.CHANGE_SELECTED,payload:e}),t.uploadMines=e=>({type:n.Actions.UPLOAD_MINES,payload:e}),t.addOpened=e=>({type:n.Actions.ADD_OPENED,payload:e}),t.lostGame=e=>({type:n.Actions.LOST_GAME,payload:e}),t.resetGame=()=>({type:n.Actions.RESET_GAME,payload:JSON.stringify({selected:"",started:!1,mines:"",opened:[],lost:!1})})},527:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addObserver=t.dispatch=t.state=void 0;const n=s(601),r=[];t.state={selected:"",started:!1,mines:"",opened:[],lost:!1},t.dispatch=e=>{const s=JSON.parse(JSON.stringify(t.state));t.state=(0,n.reducer)(e,s),r.forEach((e=>e.render())),console.log(t.state)},t.addObserver=e=>{r.push(e)}},601:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const n=s(527),r=s(823);t.reducer=(e,t)=>{switch(e.type){case r.Actions.CHANGE_SELECTED:return!1===n.state.started?Object.assign(Object.assign({},t),{selected:e.payload,started:!0}):Object.assign(Object.assign({},t),{selected:e.payload});case r.Actions.UPLOAD_MINES:return Object.assign(Object.assign({},t),{mines:e.payload});case r.Actions.LOST_GAME:return Object.assign(Object.assign({},t),{lost:JSON.parse(e.payload)});case r.Actions.ADD_OPENED:const s=t.opened;return s.push(parseInt(e.payload)),Object.assign(Object.assign({},t),{opened:s});case r.Actions.RESET_GAME:return JSON.parse(e.payload);default:return t}}},823:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0,function(e){e.CHANGE_SELECTED="CHANGE_SELECTED",e.UPLOAD_MINES="UPLOAD_MINES",e.ADD_OPENED="ADD_OPENED",e.RESET_GAME="RESET_GAME",e.LOST_GAME="LOST_GAME"}(s||(t.Actions=s={}))},500:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.creationSquare=void 0,s(93);const n=s(527),r=s(170),o=s(32);t.creationSquare=e=>{if(!1===n.state.lost){const t=[];if(!1===n.state.started){for(let e=1;e<65;e++){const s=Math.ceil(e/8),n=(e-1)%8+1,r=document.createElement("square-square");r.setAttribute("ident",`${e}`),r.setAttribute("column",`${n}`),r.setAttribute("row",`${s}`),t.push(r)}return t}{let s=[];""===n.state.mines?(s=(0,o.randomCells)(10,parseInt(e)),console.log(s),(0,n.dispatch)((0,r.uploadMines)(JSON.stringify(s)))):s=JSON.parse(n.state.mines);for(let o=1;o<65;o++){const a=Math.ceil(o/8),i=(o-1)%8+1,d=document.createElement("square-square");d.setAttribute("ident",`${o}`),d.setAttribute("column",`${i}`),d.setAttribute("row",`${a}`),n.state.opened.forEach((e=>{console.log(e),e===o&&d.setAttribute("opened","true")})),s.forEach((t=>{if(t===o&&d.setAttribute("mine","true"),t===parseInt(e))return console.log("Perdiste"),void(0,n.dispatch)((0,r.lostGame)(JSON.stringify(!0)))})),t.push(d)}return t}}}},32:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomCells=void 0,t.randomCells=(e,t)=>{const s=[];for(let n=0;n<e;n++){const e=(1,64,Math.floor(64*Math.random()+1));e!==t?s.push(e):n=-1}return s}}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,s),o.exports}(()=>{s(93);class e extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e;const t=this.ownerDocument.createElement("mine-table");null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}}customElements.define("app-container",e)})()})();